Week2:

LIBNAME mydata  "/courses/d1406ae5ba27fe300" access = readonly;

DATA new; set mydata.addhealth_pds;// DATA setp
LABEL H1DA1="Times of working around the hourse during the past week"
	     H1DA2="Times of doing hobbies during the past week";  //表头
       
IF feature1 = 1;
IF feature2 LE 0;

//Logic部分：
= EQ
~= ^= NE
> GT
< LE
>= GE
<= LE
PROC SORT; by AID;  //将主键作为排序

PROC FREQ; TABLES feature1 feature2; //显示frequency
RUN; //execute above all

Week3:
Data management
1.data missing
  IF F1 = 9 then F1 = .;
	
2. Blank information
IF F1 = . Then F1 = 11;   /*空着和unknow不一样，空着和不回答是两回事。

3. Create secondary variable
ACTIVITY = H1DA1 + H1DA2;
IF ACTIVITY < 3 then ACTIVITY = 0;
ELSE IF ACTIVITY >= 3 then ACTIVITY =1;  
PROC PRINT; VAR H1DA1 H1DA2 ACTIVITY;  看看对不对

4. Category
IF H1DA1 = 0 THEN Group = 0;
ELSE IF H1DA1 = 1 THEN Group = 1;
ELSE IF H1DA1 = 2 THEN Group = 2;
ELSE IF H1DA1 = 3 THEN Group = 3;
ELSE Group = .;

Week4:
category:
PRO GCHART; VBAR F1/Discrete type = PCT width = 30; /*VBAR = 垂直 ; Discrete = category  PCT = percentage*/
PRO FREQ

quantitative:
PRO GCHART; VBAR F2/ type = PCT; 
PROC UNIVARIATE; VAR H1DA8;/*查看 mean median mode

2 variable relationship:
bar chart for 2 category
PROC GCHART; VBAR categorical_x_variable/discrete Type = mean Sumvar = categorical_y_variable;

scattorplot for 2 quantitative

PROC GPLOT; Plot y_variable * x_variable

Course2

Week 1
As long as adequately large samples and an adequantly large number of samples are used from a population, the 
distribution of the statistics of the samples will be normally distributed

Hypothesis Testing
1.Specify the null(H0) and the alternate(Ha) hypothesis(定义两个猜测)
2.Choose a sample
3. Access the evidence
4.Draw conclusions

P Value <= 5%  (Significance level of a test) Reject null hypothesis   -- h0 是错的
P value > 5% data do not provide enough evidence to accept the Ha   -----H1是错的
p value = the number of times out of 100 we would be wrong in rejecting the H0

3种 statictical tools：
ANOVA analysis of variance
x2 - chi Square test of independence
r - correlation coefficient

C -> Q (ANOVA)
C -> C (x2)
Q -> Q (pearson correlation r)
Q -> C (x2)


1.ANOVA F test:
    are the differences among the sample means due to true difference among the population means or
    merely due to sampling variability
    F = variation among sample means / variation within groups
    
    So, F is big, 两个因素是相关的，Ha接受

	PROC ANOVA; Class explanatory variable;
	MODEL response variable =  explanatory variable;
	MEANS explanatory variable;
if explanatory variable more than 2 group, ANOVA do not tell us which groups are different from the others!!

1-2 Using post hoc test to see difference when x feature is more than 2 categories
one of post hoc is DUNCAN test

	MEANS explanatory variable/DUNCAN;

Incorrectly rejects the H0 ---Type 1 error


Courses2 
Week 2

Chi Squre
c -> c

1. get expected value
use column total * row total / total
X**2 = SUM((observed count - expected count)**2 / expected count)

So 2 by 2 case, X**2 > 3.84 is large, difference is large
如果不是2 by 2 ，还是得看P value
如何使用chiSQuare？
	PROC FREQ; TABLES yfeature * xfeature/CHISQ;

如果是 Explanatory variable > 2 levels, 不能确定哪些是有关系的
也使用post hoc test来判断，不过比之前ANOVA里要复杂！
这里叫做Bonferroni Adjustment
改变p value的值，不适用0.05 而是p/c (c是需要对比的次数)
比如有5个类别， 则对比次数为 4 + 3 + 2 + 1 = 10 次
1.所以 adjusted p value = 0.05 / 10
2.选取 explantory variable中的两种，（假设这里response variable只有2种）， 用PROC FREQ; TABLES yfeature * xfeature/CHISQ;
得出pvalue，如果 < adjusted p value, 有关，否则无关

使用这种选择对于所有的两两之间：
DATA COMPARISON1; SET New;
IF H1DA1 = 0 or H1DA1 = 1;
PROC SORT; BY AID;
PROC FREQ; Tables H1GH1A * H1DA1/ CHISQ;
RUN;
Q - > C
变成C -> C

Course 2
Week 3:
Q -> Q Pearson correlation (measure a linear relationship between 2 Quantitative variables)
How to describe scotter plot:
form:1 Linear    2.curvilinear 

Pearson correlation coefficient = r (-1= < r <= 1)(strength of a linear relationship between 2 Q variables)
r的平方表示 百分之多少的 one variable can be predicted by the other.
0 表示 weak relationship -1 或者1 都是 strong relationship。 只是一个是递增关系，一个递减。
这个值只对linear关系有效，对curvilinear关系无效

这里P value <= 0.05表示有关系

所以：
1.使用 PROC GPLOT; Ploy y variable * x variable;  //看图
      PROC CORR; Var 1 variable 2variable 3variable; //看r和p
      会显示 r < p  很奇怪的表示，但是无所谓了。


Courser2
Week 4

第三种variable   ：  Moderator缓和
在每一种moderator的情况下，x和y变量都有关系吗？
了解第三个变量Moderator的影响；假设这里是C->Q的情况，
1.使用ANOVA方法分析。
则代码变为：
	PROC SORT; By moderator;
	PROC ANOVA; Class x;
	MODEL y = x;
	MEANS x; By Moderator;
	
2.在C-》C的情况下，使用 CHI SQUARE
PRO SORT; By Moderator;
PROC FREQ; Tanles y* x/CHISQ; BY Moderator;
如果moderator各个情况下x和y的关系一样，则说明moderator does not moderate the relationship between x and y 

3.Q->Q pearson情况下
 PROC SORT; by moderator;
 PROC CORR; VAR x y; BY moderator;
 


Week3

Week3 - 1
data: 1.observation data
      2. experimental data
      
      confounding variable  =  lurking variable (干扰因素)
      需要控制这些变量
      
 
